<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	  
<mapper namespace="com.example.project_team.mappers.AccountMapper">

<insert id="insertAccount" parameterType="com.example.project_team.dto.AccountDTO">
	insert into team_account(accountnum,id,accountpw,accountlimit)
	values((SELECT NVL(MAX(accountNum)+1,1002000000000) FROM team_account),#{id},#{accountPW},#{accountLimit})
</insert>

<select id="accountList" parameterType="String" resultType="com.example.project_team.dto.AccountDTO">
	SELECT * FROM team_account where show = 'y' and id=#{id} order by accountType,accountnum
</select>

<select id="accountListE" parameterType="String" resultType="com.example.project_team.dto.AccountDTO">
	SELECT * FROM team_account where show = 'y' and id=#{id} and accountType='e' order by accountnum
</select>

<select id="accountListY" parameterType="String" resultType="com.example.project_team.dto.AccountDTO">
	SELECT * FROM team_account where show = 'y' and id=#{id} and accountType='y' order by accountnum
</select>

<select id="fetchAccountByNum" parameterType="long" resultType="com.example.project_team.dto.AccountDTO">
	SELECT * FROM team_account WHERE accountnum=#{accountnum} 
</select>
<update id="passwordModify" parameterType="com.example.project_team.dto.AccountDTO">
	UPDATE team_account SET accountPW = #{accountPW} WHERE id=#{id}
</update>
<update id="deleteAccount" parameterType="long">
	UPDATE team_account SET show = 'n' WHERE accountnum=#{accountnum}
</update>
</mapper>